{% extends 'base/layout.html'%}
{% block title %} Register Page {% endblock title%}
{% load crispy_forms_tags %}


{%block content %}

<div class="container">
    <div class="row">
        <div class="col-md-5">

			<div class="card border-primary bg-dark text-light">
				<div class="card-body">
				  <h4 class="card-title">เพิ่มพนักงาน</h4><hr>
				  <p class="card-text">Username = รหัสพนักงาน เช่น 1001</p>
				  <form method="post" action="{% url 'register'%}" >
					  {% csrf_token %}
					  <div class="row">
			
						  <div class="col-md-12">
							  {{ form_user.username|as_crispy_field}}
						  </div>
			
						  <div class="col-md-12">
							  {{ form_user.email|as_crispy_field}}
						  </div>
						  <div class="col-md-12">
							  {{ form_user.first_name|as_crispy_field}}
						  </div>
			
						  <div class="col-md-12">
							  {{ form_user.last_name|as_crispy_field}}
						  </div>
			
						  <div class="col-md-12">
							  {{ form_user.password1|as_crispy_field}}
						  </div>
			
						  <div class="col-md-12">
							  {{ form_user.password2|as_crispy_field}}
						  </div>
						  
					  </div>
			
					  <button class="btn btn-success btn-block" type="submit">ลงทะเบียน</button>
					  <a class = "btn btn-secondary btn-block"href="/user"> ยกเลิก </a>
			
				  </form>
			
				</div>
			</div>
            
        </div>

		<div class="col-md-7">

			<div class="card border-primary bg-dark text-light">
				<div class="card-body">

					<div class="alert alert-danger">
						<strong>คำเตือน!</strong> เพื่อให้แน่ใจว่า <a href="#" class="alert-link">ข้อมูลทุกอย่างของรหัสนี้จะถูกลบออกจากระบบ ผู้ใช้</a>.
					  </div>

				<!-- Filter ค้นหาข้อมูล -->
					<div class="card-body bg-dark text-light">
						<h4>ค้นหาข้อมูล</h4>
						<form method="GET">
						{% csrf_token %}
						{{ filter_user|crispy }}
							<button type="submit" class="btn btn-primary"><i class="bi bi-search"></i></button>
							<a tpye='reset' class="btn btn-secondary " href="{% url 'register'%}"><i class="bi bi-arrow-clockwise"></i></a>
							
						</form>
					</div>

				  
				<!-- ตารางแสดงข้อมูลรหัสใช้งาน -->
					<table class="table table-dark table-hover">
						
						<thead>
						<tr>
							<th>Username</th>
							<th>Firstname</th>
							<th>Lastname</th>
							<th>Edit</th>
		
						</tr>
						</thead>
						<tbody>
							{% for user_data in page_data %}
						<tr>
							<td>{{user_data.username }}</td>
							<td>{{user_data.first_name }}</td>
							<td>{{user_data.last_name }}</td>
		
							<td>
								<a href="{% url 'user-update' user_data.pk %}" class="btn btn-warning"><i class="bi bi-pencil"></i></a>
								<a href="{% url 'user-delete' user_data.pk %}" class="btn btn-danger"><i class="bi bi-x-circle"></i></a>
							</td>
						</tr>
						{% endfor %}
						</tbody>
						
						
					</table>
				</div>
				
			</div>

			
			<nav aria-label="Page navigation example">
				<p>Page {{page_data.number}}/{{page_data.paginator.num_pages}} </p>

				<ul class="pagination">

				<li class="page-item"> 
					{% if page_data.has_previous%} 
					
					<a class="page-link" href="?page={{ page_data.previous_page_number }}">Previous</a> 
					
					{% endif %} 
				</li>
				
				{% for num_page in page_data.paginator.page_range %}
				
				
					{% if num_page.number == num_page %}
						<li class="page-item"><a class="page-link" href="{% url 'register'%}?page={{ num_page }}">{{ num_page }}</a></li>
					
					{% else %}
						<li class="page-item"><a class="page-link" href="{% url 'register'%}?page={{ num_page }}">{{ num_page }}</a></li>
					
					{% endif %}

				{% endfor %}


				<li class="page-item">
					{% if page_data.has_next%} 

					<a class="page-link" href="{% url 'register'%}?page={{ page_data.next_page_number }}">Next</a>
					
					{% endif %} </li>
				
				</ul>

			</nav>

        </div>

    </div>
</div>

{%endblock content %}
